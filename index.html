<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mundo de las Tenis ‚Äî Tienda</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <header>
    <div class="brand">Mundo de las Tenis</div>
    <div>
      <a class="btn secondary icon-btn" href="https://wa.me/3217430829" target="_blank" rel="noopener noreferrer"
        aria-label="WhatsApp">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#0d6efd" viewBox="0 0 24 24"
          aria-hidden="true" focusable="false">
          <path
            d="M20.52 3.48A11.922 11.922 0 0012 0a11.917 11.917 0 00-10.488 6.52c-1.245 2.132-1.57 4.807-.915 7.287l-.804 5.528a1 1 0 001.406 1.03l5.391-2.688a11.847 11.847 0 007.108 2.285c6.627 0 12-5.373 12-12a11.922 11.922 0 00-3.705-8.557zM12 21.5a9.52 9.52 0 01-5.038-1.423l-.36-.22-3.2 1.6.712-4.893-.234-.39A9.515 9.515 0 012.5 12c0-5.247 4.253-9.5 9.5-9.5S21.5 6.753 21.5 12 17.247 21.5 12 21.5zm5.26-7.2c-.12-.2-.44-.32-.92-.56-.48-.24-2.84-1.4-3.28-1.56-.44-.16-.76-.24-1.08.24-.32.48-1.22 1.56-1.5 1.88-.28.32-.56.36-1.04.12s-2.04-.75-3.9-2.42c-.72-.64-1.2-1.42-1.34-1.9-.14-.48-.02-.72.1-.96.1-.22.24-.48.36-.72.12-.24.16-.4.24-.64.08-.24 0-.44-.02-.6-.04-.16-1.08-2.6-1.48-3.56-.38-.92-.77-.8-1.08-.8h-.92c-.28 0-.6.08-.92.4s-1.2 1.17-1.2 2.84 1.23 3.3 1.4 3.54c.16.24 2.4 3.7 5.82 5.2.81.35 1.44.56 1.93.72.81.27 1.55.23 2.13.14.65-.11 2.02-.82 2.3-1.62.3-.8.3-1.48.21-1.62z" />
        </svg>
      </a>

    </div>
  </header>

  <main class="container">
    <section class="hero">
      <div class="left">
        <img src="https://picsum.photos/1200/400?seed=tenishero" alt="Hero Mundo de las Tenis" />
        <h2>Bienvenidos ‚Äî Las mejores zapatillas al mejor precio</h2>
        <p class="small">Explora nuestra colecci√≥n y agrega al carrito. Al pagar, nos llegar√° la orden por WhatsApp.</p>
      </div>
      <aside class="right">
        <h3>Promoci√≥n</h3>
        <p class="small">Env√≠os gratis en compras mayores a $200.000</p>
        <img src="https://picsum.photos/400/240?seed=promo" alt="Promoci√≥n Mundo de las Tenis" />
      </aside>
    </section>

    <section>
      <h3>Cat√°logo</h3>
      <div class="grid" id="productGrid">
        <!-- Productos cargados por JS -->
      </div>
    </section>
  </main>

  <div id="cartModal" class="modal" style="display:none" role="dialog" aria-modal="true" aria-labelledby="cartTitle">
    <header>
      <strong id="cartTitle">Tu carrito</strong>
      <div>
        <button class="btn" id="closeCart" aria-label="Cerrar carrito">Cerrar</button>
      </div>
    </header>

    <div class="items" id="cartItems" tabindex="0">
      <!-- Items del carrito -->
    </div>

    <footer class="cart-footer">
      <div>
        <small>Total:</small>
        <div id="cartTotal">$0</div>
      </div>

      <div>
        <button class="btn secondary" id="clearCartBtn">Vaciar</button>
        <button class="btn" id="checkoutBtn">Pagar por WhatsApp</button>
      </div>

      <div>
        <input id="customerName" type="text" placeholder="Tu nombre" aria-label="Nombre del cliente"
          autocomplete="name" />
        <input id="customerAddress" type="text" placeholder="Direcci√≥n / barrio (opcional)"
          aria-label="Direcci√≥n o barrio" autocomplete="address-line1" />
      </div>
    </footer>
  </div>

  <script>
    // Productos con imagen y tallas disponibles
    const productos = [
      {
        id: 1,
        nombre: "Tenis Nike Air",
        precio: 180000,
        imagen: "https://encrypted-tbn2.gstatic.com/shopping?q=tbn:ANd9GcRevt2Bx0-zxv8RWuMsc2SrnifAYw4nvZ81JxkXlolB6KtQ-Daqf2mXIazDk3u9FfYxd9cCJlZQg_Hzugdz65-J1xgD-e2goG6P27DZS3gpZeCCqYGlKZJN9zU",
        tallas: [36, 37, 38, 39, 40, 41, 42]
      },
      {
        id: 2,
        nombre: "Adidas Classic",
        precio: 150000,
        imagen: "https://images.unsplash.com/photo-1519741493670-3a8e44d7f29e?auto=format&fit=crop&w=400&q=80",
        tallas: [37, 38, 39, 40, 41]
      },
      {
        id: 3,
        nombre: "Puma Street",
        precio: 130000,
        imagen: "https://images.unsplash.com/photo-1600185369446-cbb5a59b35f4?auto=format&fit=crop&w=400&q=80",
        tallas: [38, 39, 40, 41, 42, 43]
      }
    ];

    const carrito = [];

    const productGrid = document.getElementById("productGrid");
    const cartCount = document.getElementById("cartCount");
    const cartItems = document.getElementById("cartItems");
    const cartTotal = document.getElementById("cartTotal");
    const cartModal = document.getElementById("cartModal");

    // Mostrar productos con selector de talla
    productos.forEach(producto => {
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <img src="${producto.imagen}" alt="${producto.nombre}" />
        <h4>${producto.nombre}</h4>
        <p>$${producto.precio.toLocaleString()}</p>
        <label for="talla-${producto.id}">Talla:</label>
        <select id="talla-${producto.id}" aria-label="Selecciona talla para ${producto.nombre}">
          <option value="" disabled selected>Elige talla</option>
          ${producto.tallas.map(t => `<option value="${t}">${t}</option>`).join('')}
        </select>
        <button class="btn" onclick="agregarAlCarrito(${producto.id})">Agregar üõçÔ∏è</button>
      `;
      productGrid.appendChild(card);
    });

    function agregarAlCarrito(id) {
      const producto = productos.find(p => p.id === id);
      const select = document.getElementById(`talla-${id}`);
      const talla = select.value;

      if (!talla) {
        alert("Por favor selecciona una talla.");
        select.focus();
        return;
      }

      const existente = carrito.find(item => item.id === id && item.talla === talla);
      if (existente) {
        existente.cantidad += 1;
      } else {
        carrito.push({ ...producto, cantidad: 1, talla });
      }
      actualizarCarrito();
    }

    function actualizarCarrito() {
      cartItems.innerHTML = "";
      if (carrito.length === 0) {
        cartItems.textContent = "Tu carrito est√° vac√≠o.";
        cartCount.style.display = "none";
        cartTotal.textContent = "$0";
        return;
      }

      let total = 0;
      carrito.forEach(item => {
        total += item.precio * item.cantidad;

        const div = document.createElement("div");
        div.className = "cart-item";
        div.innerHTML = `
          <img src="${item.imagen}" alt="${item.nombre}" />
          <div class="cart-item-details">
            <strong>${item.nombre}</strong><br />
            Talla: ${item.talla}<br />
            Cantidad: ${item.cantidad}<br />
            Precio: $${(item.precio * item.cantidad).toLocaleString()}
          </div>
          <div>
            <button aria-label="Aumentar cantidad" onclick="cambiarCantidad(${item.id}, '${item.talla}', 1)">+</button>
            <button aria-label="Disminuir cantidad" onclick="cambiarCantidad(${item.id}, '${item.talla}', -1)">‚àí</button>
            <button aria-label="Eliminar producto" onclick="eliminarProducto(${item.id}, '${item.talla}')">‚úï</button>
          </div>
        `;
        cartItems.appendChild(div);
      });

      cartTotal.textContent = `$${total.toLocaleString()}`;
      cartCount.textContent = carrito.length;
      cartCount.style.display = carrito.length > 0 ? "inline-block" : "none";
    }

    function cambiarCantidad(id, talla, delta) {
      const item = carrito.find(i => i.id === id && i.talla === talla);
      if (!item) return;
      item.cantidad += delta;
      if (item.cantidad <= 0) {
        eliminarProducto(id, talla);
      } else {
        actualizarCarrito();
      }
    }

    function eliminarProducto(id, talla) {
      const index = carrito.findIndex(i => i.id === id && i.talla === talla);
      if (index > -1) {
        carrito.splice(index, 1);
        actualizarCarrito();
      }
    }

    document.getElementById("openCartBtn").addEventListener("click", () => {
      cartModal.style.display = "block";
      cartModal.focus();
    });

    document.getElementById("closeCart").addEventListener("click", () => {
      cartModal.style.display = "none";
    });

    document.getElementById("clearCartBtn").addEventListener("click", () => {
      carrito.length = 0;
      actualizarCarrito();
    });

    document.getElementById("checkoutBtn").addEventListener("click", () => {
      const nombre = document.getElementById("customerName").value.trim();
      const direccion = document.getElementById("customerAddress").value.trim();

      if (!nombre) {
        alert("Por favor ingresa tu nombre.");
        return;
      }

      if (carrito.length === 0) {
        alert("Tu carrito est√° vac√≠o.");
        return;
      }

      const itemsTexto = carrito.map(item =>
        `‚Ä¢ ${item.nombre} (Talla: ${item.talla}) x${item.cantidad} ‚Äî $${(item.precio * item.cantidad).toLocaleString()}`
      ).join('\n');

      const total = carrito.reduce((sum, item) => sum + item.precio * item.cantidad, 0);

      const mensaje = `Hola, quiero hacer un pedido:\n\n${itemsTexto}\n\nTotal: $${total.toLocaleString()}\nNombre: ${nombre}\nDirecci√≥n: ${direccion}`;
      const url = `https://wa.me/3217430829?text=${encodeURIComponent(mensaje)}`;

      window.open(url, "_blank");
    });

    actualizarCarrito();
  </script>

</body>

</html>