<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Mundo de las Tenis â€” Tienda</title>
<link rel="icon" href="data:;base64,iVBORw0KGgo=">

<body>

<header>
  <div class="brand">Mundo de las Tenis</div>
  <div style="display:flex;gap:10px;align-items:center">
    <button class="btn cart-btn" id="openCartBtn">Carrito ðŸ›’ <span id="cartCount" class="cart-count" style="display:none">0</span></button>
    <a class="btn secondary" href="https://wa.me/YOUR_WHATSAPP_NUMBER" target="_blank" rel="noopener">WhatsApp</a>
  </div>
</header>

<main class="container">
  <section class="hero">
    <div class="left">
      <img src="https://picsum.photos/1200/400?seed=tenishero" alt="Hero Mundo de las Tenis">
      <h2 style="margin-top:12px">Bienvenidos â€” Las mejores zapatillas al mejor precio</h2>
      <p class="small">Explora nuestra colecciÃ³n y agrega al carrito. Al pagar, nos llegarÃ¡ la orden por WhatsApp.</p>
    </div>
    <aside class="right" style="padding:12px">
      <h3>PromociÃ³n</h3>
      <p class="small">EnvÃ­os gratis en compras mayores a $200.000</p>
      <img src="https://picsum.photos/400/240?seed=promo" alt="promo" style="width:100%;border-radius:8px;margin-top:8px">
    </aside>
  </section>

  <section>
    <h3>CatÃ¡logo</h3>
    <div class="grid" id="productGrid">
      <!-- productos vÃ­a JS -->
    </div>
  </section>
</main>

<!-- Modal carrito -->
<div id="cartModal" class="modal" style="display:none">
  <header>
    <strong>Tu carrito</strong>
    <div>
      <button class="btn" id="closeCart">Cerrar</button>
    </div>
  </header>
  <div class="items" id="cartItems"></div>
  <footer class="cart-footer">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div><small class="small">Total:</small><div id="cartTotal" style="font-weight:700">0</div></div>
      <div style="display:flex;gap:8px">
        <button class="btn secondary" id="clearCartBtn">Vaciar</button>
        <button class="btn" id="checkoutBtn">Pagar por WhatsApp</button>
      </div>
    </div>
    <div style="display:flex;flex-direction:column;gap:6px">
      <input id="customerName" placeholder="Tu nombre" style="padding:8px;border-radius:6px;border:1px solid #ddd" />
      <input id="customerAddress" placeholder="DirecciÃ³n / barrio (opcional)" style="padding:8px;border-radius:6px;border:1px solid #ddd" />
    </div>
  </footer>
</div>

<script>
/* ========== CONFIG ========== */
/* Cambia este nÃºmero por tu WhatsApp en formato internacional sin + ni espacios
   Ejemplo Colombia: 57 3001234567 -> 573001234567 */
const WHATSAPP_NUMBER = "YOUR_WHATSAPP_NUMBER";

/* Productos ejemplo: id, title, price (nÃºmero), sizes array, image */
const products = [
  {id: "p1", title: "Tenis Runner Pro", price: 180000, sizes: ["38","39","40","41","42"], img:"https://picsum.photos/seed/tenis1/800/600"},
  {id: "p2", title: "Zapatilla Urbana X", price: 150000, sizes: ["37","38","39","40","41"], img:"https://picsum.photos/seed/tenis2/800/600"},
  {id: "p3", title: "Sneaker Comfort", price: 210000, sizes: ["39","40","41","42","43"], img:"https://picsum.photos/seed/tenis3/800/600"},
  {id: "p4", title: "SportFlex 200", price: 120000, sizes: ["36","37","38","39","40"], img:"https://picsum.photos/seed/tenis4/800/600"}
];

/* ========== LÃ“GICA ========== */
const productGrid = document.getElementById('productGrid');
const cartModal = document.getElementById('cartModal');
const openCartBtn = document.getElementById('openCartBtn');
const closeCart = document.getElementById('closeCart');
const cartItemsEl = document.getElementById('cartItems');
const cartTotalEl = document.getElementById('cartTotal');
const cartCountEl = document.getElementById('cartCount');
const clearCartBtn = document.getElementById('clearCartBtn');
const checkoutBtn = document.getElementById('checkoutBtn');
const customerName = document.getElementById('customerName');
const customerAddress = document.getElementById('customerAddress');

let cart = JSON.parse(localStorage.getItem('mdlt_cart') || '[]');

function saveCart(){ localStorage.setItem('mdlt_cart', JSON.stringify(cart)); renderCart(); }
function formatPrice(n){ return n.toLocaleString('es-CO', {style:'currency', currency:'COP'}).replace(/\u00A0/g,' '); }

/* render productos */
function renderProducts(){
  productGrid.innerHTML = '';
  products.forEach(p => {
    const card = document.createElement('div'); card.className='card';
    card.innerHTML = `
      <img src="${p.img}" alt="${p.title}">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <div style="font-weight:700">${p.title}</div>
          <div class="small">${p.sizes.join(' â€¢ ')}</div>
        </div>
        <div class="price">${formatPrice(p.price)}</div>
      </div>
      <div style="display:flex;gap:8px;align-items:center;margin-top:6px">
        <select aria-label="size" data-id="${p.id}" class="sizeSel" style="padding:8px;border-radius:6px;border:1px solid #ddd">
          ${p.sizes.map(s=>`<option value="${s}">${s}</option>`).join('')}
        </select>
        <button class="btn addBtn" data-id="${p.id}">Agregar</button>
      </div>`;
    productGrid.appendChild(card);
  });

  // listeners
  document.querySelectorAll('.addBtn').forEach(b=>{
    b.addEventListener('click', (e)=>{
      const id = e.currentTarget.dataset.id;
      const sel = document.querySelector(`select[data-id="${id}"]`);
      addToCart(id, sel.value);
    });
  });
}

/* aÃ±adir al carrito */
function addToCart(productId, size){
  const prod = products.find(p=>p.id===productId);
  if(!prod) return;
  const existing = cart.find(i=>i.id===productId && i.size===size);
  if(existing) existing.qty++;
  else cart.push({id:productId, size:size, qty:1, title:prod.title, price:prod.price, img:prod.img});
  saveCart();
  toast('AÃ±adido al carrito');
}

/* render carrito */
function renderCart(){
  cartItemsEl.innerHTML = '';
  if(cart.length===0) {
    cartItemsEl.innerHTML = '<div style="padding:12px;color:#666">No hay productos en el carrito.</div>';
    cartTotalEl.innerText = formatPrice(0);
    cartCountEl.style.display='none';
    return;
  }
  cart.forEach((it, idx)=>{
    const itemEl = document.createElement('div'); itemEl.className='item';
    itemEl.innerHTML = `
      <img src="${it.img}" alt="${it.title}">
      <div style="flex:1">
        <div style="font-weight:600">${it.title}</div>
        <div class="small">Talla: ${it.size}</div>
        <div class="small">Precio: ${formatPrice(it.price)}</div>
      </div>
      <div style="display:flex;flex-direction:column;align-items:flex-end;gap:6px">
        <div class="qty">
          <button class="btn secondary dec" data-idx="${idx}">-</button>
          <div style="padding:6px 10px;border:1px solid #eee;border-radius:6px">${it.qty}</div>
          <button class="btn" data-idx="${idx}" class="inc">+</button>
        </div>
        <button class="btn secondary remove" data-idx="${idx}">Eliminar</button>
      </div>`;
    cartItemsEl.appendChild(itemEl);
  });
  // add listeners
  cartItemsEl.querySelectorAll('.dec').forEach(b=>{
    b.addEventListener('click', e=>{
      const i = +e.currentTarget.dataset.idx;
      if(cart[i].qty>1) cart[i].qty--; else cart.splice(i,1);
      saveCart();
    });
  });
  cartItemsEl.querySelectorAll('.btn[data-idx]').forEach(b=>{
    if(b.classList.contains('secondary') && b.innerText === 'Eliminar') {
      b.addEventListener('click', e=>{ cart.splice(+e.currentTarget.dataset.idx,1); saveCart(); });
    } else if (b.innerText === '+') {
      b.addEventListener('click', e=>{ cart[+e.currentTarget.dataset.idx].qty++; saveCart(); });
    }
  });

  // total + count
  const total = cart.reduce((s,i)=>s + i.price * i.qty, 0);
  cartTotalEl.innerText = formatPrice(total);
  cartCountEl.innerText = cart.reduce((s,i)=>s+i.qty, 0);
  cartCountEl.style.display='inline-block';
}

/* helpers */
function toast(msg){
  const d = document.createElement('div');
  d.innerText = msg;
  d.style.position='fixed'; d.style.left='50%'; d.style.bottom='24px'; d.style.transform='translateX(-50%)';
  d.style.background='rgba(0,0,0,0.8)'; d.style.color='white'; d.style.padding='10px 14px'; d.style.borderRadius='8px';
  d.style.zIndex=9999; document.body.appendChild(d);
  setTimeout(()=>d.remove(),1500);
}

/* acciones UI */
openCartBtn.addEventListener('click', ()=>cartModal.style.display='flex');
closeCart.addEventListener('click', ()=>cartModal.style.display='none');
clearCartBtn.addEventListener('click', ()=>{ cart = []; saveCart(); });
checkoutBtn.addEventListener('click', ()=> checkoutFlow());

function checkoutFlow(){
  if(cart.length===0){ toast('Tu carrito estÃ¡ vacÃ­o'); return; }
  const name = customerName.value.trim();
  if(!name){ toast('Ingresa tu nombre para la orden'); return; }

  const address = customerAddress.value.trim();
  // construir mensaje
  let message = `ðŸ›’ *Nueva orden - Mundo de las Tenis*%0A`;
  message += `*Cliente:* ${encodeURIComponent(name)}%0A`;
  if(address) message += `*DirecciÃ³n:* ${encodeURIComponent(address)}%0A`;
  message += `%0A*Detalles:*%0A`;

  cart.forEach(it=>{
    const line = `- ${it.title} (Talla ${it.size}) x${it.qty} â€” ${formatPrice(it.price)} c/u`;
    message += `${encodeURIComponent(line)}%0A`;
  });
  const total = cart.reduce((s,i)=>s + i.price * i.qty, 0);
  message += `%0A*Total:* ${encodeURIComponent(formatPrice(total))}%0A`;
  message += `%0A*Notas:* (escribe si quieres agregar algo)%0A`;
  // abrir WhatsApp (wa.me)
  const waUrl = `https://wa.me/${WHATSAPP_NUMBER}?text=${message}`;
  window.open(waUrl, '_blank');
}

/* init */
renderProducts();
renderCart();
</script>
</body>
</html>
